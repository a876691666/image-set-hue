(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function U(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Q(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function v(){}var R=.7,P=1/R,y="\\s*([+-]?\\d+)\\s*",_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",d="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ie=/^#([0-9a-f]{3,8})$/,fe=new RegExp(`^rgb\\(${y},${y},${y}\\)$`),se=new RegExp(`^rgb\\(${d},${d},${d}\\)$`),ce=new RegExp(`^rgba\\(${y},${y},${y},${_}\\)$`),le=new RegExp(`^rgba\\(${d},${d},${d},${_}\\)$`),de=new RegExp(`^hsl\\(${_},${d},${d}\\)$`),xe=new RegExp(`^hsla\\(${_},${d},${d},${_}\\)$`),q={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U(v,L,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:D,formatHex:D,formatHex8:ue,formatHsl:ge,formatRgb:X,toString:X});function D(){return this.rgb().formatHex()}function ue(){return this.rgb().formatHex8()}function ge(){return Z(this).formatHsl()}function X(){return this.rgb().formatRgb()}function L(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ie.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?G(t):n===3?new s(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?$(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?$(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fe.exec(e))?new s(t[1],t[2],t[3],1):(t=se.exec(e))?new s(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ce.exec(e))?$(t[1],t[2],t[3],t[4]):(t=le.exec(e))?$(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=de.exec(e))?Y(t[1],t[2]/100,t[3]/100,1):(t=xe.exec(e))?Y(t[1],t[2]/100,t[3]/100,t[4]):q.hasOwnProperty(e)?G(q[e]):e==="transparent"?new s(NaN,NaN,NaN,0):null}function G(e){return new s(e>>16&255,e>>8&255,e&255,1)}function $(e,t,n,a){return a<=0&&(e=t=n=NaN),new s(e,t,n,a)}function he(e){return e instanceof v||(e=L(e)),e?(e=e.rgb(),new s(e.r,e.g,e.b,e.opacity)):new s}function me(e,t,n,a){return arguments.length===1?he(e):new s(e,t,n,a??1)}function s(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}U(s,me,Q(v,{brighter(e){return e=e==null?P:Math.pow(P,e),new s(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?R:Math.pow(R,e),new s(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new s(h(this.r),h(this.g),h(this.b),N(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j,formatHex:j,formatHex8:be,formatRgb:W,toString:W}));function j(){return`#${g(this.r)}${g(this.g)}${g(this.b)}`}function be(){return`#${g(this.r)}${g(this.g)}${g(this.b)}${g((isNaN(this.opacity)?1:this.opacity)*255)}`}function W(){const e=N(this.opacity);return`${e===1?"rgb(":"rgba("}${h(this.r)}, ${h(this.g)}, ${h(this.b)}${e===1?")":`, ${e})`}`}function N(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function h(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function g(e){return e=h(e),(e<16?"0":"")+e.toString(16)}function Y(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new l(e,t,n,a)}function Z(e){if(e instanceof l)return new l(e.h,e.s,e.l,e.opacity);if(e instanceof v||(e=L(e)),!e)return new l;if(e instanceof l)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,o=Math.min(t,n,a),r=Math.max(t,n,a),c=NaN,f=r-o,i=(r+o)/2;return f?(t===r?c=(n-a)/f+(n<a)*6:n===r?c=(a-t)/f+2:c=(t-n)/f+4,f/=i<.5?r+o:2-r-o,c*=60):f=i>0&&i<1?0:c,new l(c,f,i,e.opacity)}function pe(e,t,n,a){return arguments.length===1?Z(e):new l(e,t,n,a??1)}function l(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}U(l,pe,Q(v,{brighter(e){return e=e==null?P:Math.pow(P,e),new l(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?R:Math.pow(R,e),new l(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,o=2*n-a;return new s(B(e>=240?e-240:e+120,o,a),B(e,o,a),B(e<120?e+240:e-120,o,a),this.opacity)},clamp(){return new l(K(this.h),A(this.s),A(this.l),N(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=N(this.opacity);return`${e===1?"hsl(":"hsla("}${K(this.h)}, ${A(this.s)*100}%, ${A(this.l)*100}%${e===1?")":`, ${e})`}`}}));function K(e){return e=(e||0)%360,e<0?e+360:e}function A(e){return Math.max(0,Math.min(1,e||0))}function B(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function ye(e){const t=new Image;let n=null;const a=new Promise((i,x)=>{if(n){i(n);return}t.onload=()=>{n=t,i(t)},t.onerror=m=>{x(m)},t.src=typeof e=="string"?e:URL.createObjectURL(e)}),o=document.createElement("canvas"),r=o.getContext("webgl");if(!r)throw new Error("Failed to get WebGL context");const f=(()=>{const i=`
      attribute vec2 a_position;
      attribute vec2 a_texCoord;
      varying vec2 v_texCoord;
      void main() {
        gl_Position = vec4(a_position, 0, 1);
        v_texCoord = a_texCoord;
      }
    `,x=`
      precision mediump float;
      uniform sampler2D u_image;
      uniform float u_targetHue;
      varying vec2 v_texCoord;

      float hue2rgb(float p, float q, float t) {
        if (t < 0.0) t += 1.0;
        if (t > 1.0) t -= 1.0;
        if (t < 1.0 / 6.0) return p + (q - p) * 6.0 * t;
        if (t < 1.0 / 2.0) return q;
        if (t < 2.0 / 3.0) return p + (q - p) * (2.0 / 3.0 - t) * 6.0;
        return p;
      }

      vec3 rgbToHsl(vec3 color) {
        float r = color.r, g = color.g, b = color.b;
        float maxVal = max(r, max(g, b));
        float minVal = min(r, min(g, b));
        float h = 0.0, s = 0.0, l = (maxVal + minVal) / 2.0;

        if (maxVal != minVal) {
          float d = maxVal - minVal;
          s = l > 0.5 ? d / (2.0 - maxVal - minVal) : d / (maxVal + minVal);
          if (maxVal == r) {
            h = (g - b) / d + (g < b ? 6.0 : 0.0);
          } else if (maxVal == g) {
            h = (b - r) / d + 2.0;
          } else {
            h = (r - g) / d + 4.0;
          }
          h /= 6.0;
        }
        return vec3(h, s, l);
      }

      vec3 hslToRgb(vec3 hsl) {
        float h = hsl.x, s = hsl.y, l = hsl.z;
        float r, g, b;

        if (s == 0.0) {
          r = g = b = l; // achromatic
        } else {
          float q = l < 0.5 ? l * (1.0 + s) : l + s - l * s;
          float p = 2.0 * l - q;
          r = hue2rgb(p, q, h + 1.0 / 3.0);
          g = hue2rgb(p, q, h);
          b = hue2rgb(p, q, h - 1.0 / 3.0);
        }
        return vec3(r, g, b);
      }

      void main() {
        vec4 color = texture2D(u_image, v_texCoord);
        vec3 hsl = rgbToHsl(color.rgb);
        hsl.x = u_targetHue / 360.0; // Adjust hue
        gl_FragColor = vec4(hslToRgb(hsl), color.a);
      }
    `,m=z(r,r.VERTEX_SHADER,i),u=z(r,r.FRAGMENT_SHADER,x);return we(r,m,u)})();return async i=>{const x=await a;o.width=x.width,o.height=x.height;const m=L(i);if(!m)throw new Error("Invalid target color");let u;const I=m.rgb(),w=I.r/255,b=I.g/255,E=I.b/255,T=Math.min(w,b,E),p=Math.max(w,b,E);p===T?u=0:p===w?u=((b-E)/(p-T)+(b<E?6:0))*60:p===b?u=((E-w)/(p-T)+2)*60:u=((w-b)/(p-T)+4)*60,r.useProgram(f);const F=r.getUniformLocation(f,"u_targetHue");if(F===null)throw new Error("Failed to get uniform location for u_targetHue");r.uniform1f(F,u);const M=r.createTexture();if(!M)throw new Error("Failed to create texture");r.bindTexture(r.TEXTURE_2D,M),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,x);const ee=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,ee),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),r.STATIC_DRAW);const V=r.getAttribLocation(f,"a_position");r.enableVertexAttribArray(V),r.vertexAttribPointer(V,2,r.FLOAT,!1,0,0);const te=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,te),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),r.STATIC_DRAW);const k=r.getAttribLocation(f,"a_texCoord");r.enableVertexAttribArray(k),r.vertexAttribPointer(k,2,r.FLOAT,!1,0,0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.viewport(0,0,o.width,o.height),r.drawArrays(r.TRIANGLES,0,6);const re=performance.now();return new Promise((ne,ae)=>{o.toBlob(O=>{if(O){const oe=performance.now();console.log(`Image loaded in ${oe-re} ms`),ne(O)}else ae(new Error("Failed to create Blob from canvas"))})})}}function z(e,t,n){const a=e.createShader(t);if(!a)throw new Error("Failed to create shader");if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(a)||"Shader compile error");return a}function we(e,t,n){const a=e.createProgram();if(e.attachShader(a,t),e.attachShader(a,n),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Error(e.getProgramInfoLog(a)||"Program link error");return a}const H=document.getElementById("imageInput"),Ee=[document.getElementById("colorInput1"),document.getElementById("colorInput2"),document.getElementById("colorInput3"),document.getElementById("colorInput4"),document.getElementById("colorInput5")],Re=document.getElementById("processButton"),S=document.getElementById("status"),C=document.getElementById("inputPreview"),J=[document.getElementById("time1"),document.getElementById("time2"),document.getElementById("time3"),document.getElementById("time4"),document.getElementById("time5")];H.addEventListener("change",()=>{const e=H.files[0];if(e){const t=URL.createObjectURL(e);C.src=t,C.style.display="block"}else C.style.display="none"});Re.addEventListener("click",async()=>{const e=H.files[0],t=Ee.map(n=>n.value);if(!e){alert("Please select an image.");return}S.textContent="Processing...",J.forEach(n=>n.textContent="");try{const n=ye(e);for(let a=0;a<t.length;a++){const o=t[a],r=performance.now(),c=await n(o),f=performance.now();J[a].textContent=`Processing time: ${(f-r).toFixed(2)} ms`;const i=new Image;i.src=URL.createObjectURL(c),i.style.border="1px solid black",i.style.marginTop="10px",i.style.width="600px",document.body.appendChild(i),S.textContent=`Processing complete for color ${o}!`}}catch(n){S.textContent="An error occurred during processing.",console.error(n)}});
